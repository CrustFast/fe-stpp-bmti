name: CI - Next.js Build

on:
  # Jalankan pada push ke branch main
  push:
    branches: [ main ]
  # Jalankan pada pull request ke branch main
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest # Menggunakan OS Ubuntu terbaru

    steps:
      # Langkah 1: Checkout kode dari repository
      - name: Checkout Repository
        uses: actions/checkout@v4

      # Langkah 2: Setup Node.js (misalnya versi 20)
      # Ini juga akan otomatis meng-cache dependencies (npm)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20.x
          cache: 'npm' # Ganti ke 'yarn' atau 'pnpm' jika Anda menggunakannya

      # Langkah 3: Install dependencies
      # Menggunakan 'npm ci' lebih cepat dan aman untuk CI
      - name: Install Dependencies
        run: npm ci

      # Langkah 4: Menjalankan Linter
      - name: Run Lint
        run: npm run lint

      # Langkah 5: Menjalankan Build
      # 'npm run build' akan gagal jika ada error TypeScript
      - name: Run Build
        run: npm run build

      # (Opsional) Langkah 6: Menjalankan Tests
      # Aktifkan jika Anda memiliki setup testing (mis. Jest)
      # - name: Run Tests
      #   run: npm run test